"use strict";window.ClashEditor.select=["DIRECT","REJECT"],function(){function I(){$("#proxygroup-select-list").sortable("destroy");var e="",t=!0,o=!1,r=void 0;try{for(var n,l=window.ClashEditor.select[Symbol.iterator]();!(t=(n=l.next()).done);t=!0){var c=n.value;e+='<div class="col-md-6 col-lg-4 col-xl-3 sk-px-1">\n                    <input class="proxygroup-select-input sk-hide" name="proxygroup-select" id="proxygroup-select-'.concat(c,'" type="checkbox" value="').concat(c,'">\n                    <label class="proxygroup-select-label card sk-p-3 sk-font-14" for="proxygroup-select-').concat(c,'">').concat(c,"</label>\n                </div>")}}catch(e){o=!0,r=e}finally{try{t||null==l.return||l.return()}finally{if(o)throw r}}document.getElementById("proxygroup-select-list").innerHTML=e,$("#proxygroup-select-list").sortable({placeholderClass:"proxygroup-select-label card col-md-6 col-lg-4 col-xl-3"})}var e=document.getElementById("msg"),t=localStorage.getItem("clashEditor:config:proxy"),o=localStorage.getItem("clashEditor:config:proxygroup");if(t&&""!==t){var r=!0,n=!1,l=void 0;try{for(var c,a=jsyaml.load(t).Proxy[Symbol.iterator]();!(r=(c=a.next()).done);r=!0){var u=c.value;window.ClashEditor.select.push(u.name)}}catch(e){n=!0,l=e}finally{try{r||null==a.return||a.return()}finally{if(n)throw l}}I()}else Modal("这看起来不太正常","Clash Editor 无法读取您的 Proxy 配置！<br>3 秒后将会回到 Proxy 编辑页面！"),setTimeout(function(){window.location.pathname="/proxy"},3500);var S=CodeMirror(document.getElementById("proxygroup-editor"),{lineNumbers:!0,mode:"yaml"});o&&""!==o?S.setValue(o):S.setValue("Proxy Group:\n");var i=!0,y=!1,d=void 0;try{for(var p,s=function(){var e=p.value;e.addEventListener("change",function(){e.checked&&"select"!==e.value?document.getElementById("proxygroup-httpcheck-container").style.display="block":document.getElementById("proxygroup-httpcheck-container").style.display="none"})},g=document.getElementsByName("proxygroup-category")[Symbol.iterator]();!(i=(p=g.next()).done);i=!0)s()}catch(e){y=!0,d=e}finally{try{i||null==g.return||g.return()}finally{if(y)throw d}}document.getElementById("ce-proxygroup-btn-select-opposite").addEventListener("click",function(){var e=document.getElementsByName("proxygroup-select"),t=!0,o=!1,r=void 0;try{for(var n,l=e[Symbol.iterator]();!(t=(n=l.next()).done);t=!0){var c=n.value;c.checked?c.checked=!1:c.checked=!0}}catch(e){o=!0,r=e}finally{try{t||null==l.return||l.return()}finally{if(o)throw r}}}),document.getElementById("ce-proxygroup-btn-select-all").addEventListener("click",function(){var e=document.getElementsByName("proxygroup-select"),t=!0,o=!1,r=void 0;try{for(var n,l=e[Symbol.iterator]();!(t=(n=l.next()).done);t=!0){n.value.checked=!0}}catch(e){o=!0,r=e}finally{try{t||null==l.return||l.return()}finally{if(o)throw r}}}),document.getElementById("ce-proxygroup-btn-submit").addEventListener("click",function(e){var t=[],o="",r=document.getElementById("proxygroup-policy-list"),n=new FormData(r),l=!0,c=!1,a=void 0;try{for(var u,i=n[Symbol.iterator]();!(l=(u=i.next()).done);l=!0){o=u.value[1]}}catch(e){c=!0,a=e}finally{try{l||null==i.return||i.return()}finally{if(c)throw a}}var y=document.getElementsByName("proxygroup-select"),d=!0,p=!1,s=void 0;try{for(var g,m=y[Symbol.iterator]();!(d=(g=m.next()).done);d=!0){var v=g.value;v.checked&&t.push("    - ".concat(v.value))}}catch(e){p=!0,s=e}finally{try{d||null==m.return||m.return()}finally{if(p)throw s}}var x="",h=!0,f=!1,E=void 0;try{for(var b,k=document.getElementsByName("proxygroup-category")[Symbol.iterator]();!(h=(b=k.next()).done);h=!0){var w=b.value;w.checked&&"select"!==w.value&&(x="url: ".concat(getValue("proxygroup-httpcheck-url"),"\n  interval: ").concat(getValue("proxygroup-httpcheck-interval")))}}catch(e){f=!0,E=e}finally{try{h||null==k.return||k.return()}finally{if(f)throw E}}var B="".concat(S.getValue(),"\n- name: ").concat(getValue("proxygroup-name"),"\n  type: ").concat(o,"\n  proxies:\n").concat(t.join("\n"),"\n  ").concat(x);window.ClashEditor.select.push(getValue("proxygroup-name")),S.setValue(B),r.reset(),I(),setLS("clashEditor:config:proxygroup",S.getValue()),$("#ce-modal-proxygroup").modal("hide")}),document.getElementById("ce-proxygroup-btn-validate").addEventListener("click",function(){try{jsyaml.load(S.getValue()),setLS("clashEditor:config:proxygroup",S.getValue()),e.innerHTML='<span class="text-success">Proxy Group 检查通过！</span>',document.getElementById("ce-proxygroup-btn-continue").classList.remove("disabled"),document.getElementById("ce-proxygroup-btn-continue").removeAttribute("disabled"),document.getElementById("ce-proxygroup-btn-continue").setAttribute("href","/rule")}catch(e){Modal("这看起来不太正常","<p>Clash Editor 似乎不能解析您提交的 YAML 内容</p>\n                <p>报错信息如下所示：</p>\n                <p><code>".concat(e,"</code></p>\n                <p>如果您认为这不是您的问题，请在 Clash Editor 的 GitHub 上提交一条 issue，并在 issue 中附上报错信息以供调试</p>"))}})}();